<!--pages/client/rate-issue/rate-issue.wxml-->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">服务评价</text>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{isLoading}}" class="loading">
    <text>加载中...</text>
  </view>

  <!-- 评价内容 -->
  <view wx:else class="rating-content">
    <!-- 问题信息 -->
    <view class="section">
      <view class="section-title">问题信息</view>
      <view class="info-item">
        <text class="label">问题编号：</text>
        <text class="value">{{issue.issueId}}</text>
      </view>
      <view class="info-item">
        <text class="label">问题标题：</text>
        <text class="value">{{issue.title}}</text>
      </view>
      <view class="info-item">
        <text class="label">处理结果：</text>
        <text class="value">{{issue.resultDescription}}</text>
      </view>
      <view class="info-item">
        <text class="label">完成时间：</text>
        <text class="value">{{issue.resolvedTimeText}}</text>
      </view>
    </view>

    <!-- 评分区域 -->
    <view class="section">
      <view class="section-title">服务评分</view>
      <view class="rating-area">
        <view class="rating-stars">
          <view 
            wx:for="{{[1,2,3,4,5]}}" 
            wx:key="index"
            class="star {{rating >= item ? 'active' : ''}}"
            bindtap="onRatingChange"
            data-rating="{{item}}"
          >
            ★
          </view>
        </view>
        <view class="rating-text" style="color: {{getRatingColor(rating)}}">
          {{getRatingText(rating)}}
        </view>
      </view>
    </view>

    <!-- 反馈区域 -->
    <view class="section">
      <view class="section-title">服务反馈</view>
      <view class="feedback-area">
        <textarea 
          class="feedback-input"
          placeholder="请分享您对此次服务的感受和建议（选填）"
          value="{{feedback}}"
          bindinput="onFeedbackInput"
          maxlength="500"
        />
        <view class="char-count">{{feedback.length}}/500</view>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-area">
      <button 
        class="submit-btn {{isSubmitting ? 'disabled' : ''}}"
        bindtap="onSubmitRating"
        disabled="{{isSubmitting}}"
      >
        {{isSubmitting ? '提交中...' : '提交评价'}}
      </button>
    </view>
  </view>
</view>













