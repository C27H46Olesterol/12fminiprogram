# ä¸»ç®¡ç«¯ç»´ä¿®å·¥åˆ—è¡¨ - å¾®ä¿¡åŸç”Ÿåœ°åŒºé€‰æ‹©å™¨ä½¿ç”¨è¯´æ˜

## âœ… æ›´æ–°å†…å®¹

### 1. ä½¿ç”¨å¾®ä¿¡åŸç”Ÿåœ°åŒºé€‰æ‹©å™¨
- **ç»„ä»¶ç±»å‹**: `<picker mode="region">`
- **è¦†ç›–èŒƒå›´**: ä¸­å›½æ‰€æœ‰çœå¸‚ï¼ˆå¾®ä¿¡å®˜æ–¹æ•°æ®ï¼‰
- **é€‰æ‹©çº§åˆ«**: çœ + å¸‚ï¼ˆé€šè¿‡ `level="city"` é™åˆ¶ï¼‰
- **è‡ªåŠ¨æ›´æ–°**: å¾®ä¿¡ä¼šè‡ªåŠ¨ç»´æŠ¤æœ€æ–°çš„è¡Œæ”¿åŒºåˆ’æ•°æ®

### 2. å…³é”®é…ç½®

```javascript
// é¡µé¢æ•°æ®
data: {
  regionValue: ['å…¨å›½', 'å…¨éƒ¨'],  // é»˜è®¤å€¼
  customItem: 'å…¨éƒ¨',             // è‡ªå®šä¹‰ç¬¬ä¸€é¡¹
  regionLevel: 'city',            // åªé€‰æ‹©åˆ°å¸‚çº§
  displayRegion: 'å…¨å›½',          // æ˜¾ç¤ºæ–‡æœ¬
  selectedProvince: '',           // ç­›é€‰ï¼šçœä»½
  selectedCity: '',               // ç­›é€‰ï¼šåŸå¸‚
}
```

```html
<!-- WXML é…ç½® -->
<picker 
  mode="region" 
  value="{{regionValue}}"
  bindchange="onRegionChange"
  custom-item="{{customItem}}"
  level="{{regionLevel}}"
>
  <view class="picker-display-full">
    <text class="picker-label-full">åœ°åŒºé€‰æ‹©ï¼š</text>
    <view class="picker-value-full">
      <text class="region-text">{{displayRegion}}</text>
      <text class="picker-arrow">â–¼</text>
    </view>
  </view>
</picker>
```

### 3. çƒ­é—¨åŸå¸‚å¿«æ·æ ‡ç­¾

è¦†ç›–11ä¸ªçƒ­é—¨åŸå¸‚ï¼š
- ä¸€çº¿åŸå¸‚ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€æ·±åœ³
- æ–°ä¸€çº¿ï¼šæ­å·ã€å—äº¬ã€æˆéƒ½ã€æ­¦æ±‰ã€è¥¿å®‰
- å±±ä¸œé‡ç‚¹ï¼šæµå—ã€é’å²›

ç”¨æˆ·å¯ä»¥ï¼š
- ç‚¹å‡»å¿«æ·æ ‡ç­¾ç›´æ¥é€‰æ‹©è¯¥åŸå¸‚
- å¿«æ·æ ‡ç­¾ä¸åœ°åŒºé€‰æ‹©å™¨è”åŠ¨
- å†æ¬¡ç‚¹å‡»å–æ¶ˆé€‰ä¸­

### 4. æ ¸å¿ƒåŠŸèƒ½

#### åœ°åŒºé€‰æ‹©
```javascript
onRegionChange(e) {
  const { value } = e.detail; // ['çœ', 'å¸‚']
  const province = value[0] || '';
  const city = value[1] || '';
  
  // æ›´æ–°æ˜¾ç¤ºæ–‡æœ¬
  let displayRegion = 'å…¨å›½';
  if (province && province !== 'å…¨éƒ¨') {
    displayRegion = city && city !== 'å…¨éƒ¨' 
      ? `${province} - ${city}` 
      : province;
  }
  
  // æ›´æ–°æ•°æ®å¹¶åˆ·æ–°åˆ—è¡¨
  this.setData({
    regionValue: value,
    displayRegion,
    selectedProvince: province === 'å…¨éƒ¨' ? '' : province,
    selectedCity: city === 'å…¨éƒ¨' ? '' : city
  });
  
  this.loadWorkers(true);
}
```

#### å¿«æ·æ ‡ç­¾é€‰æ‹©
```javascript
onQuickRegionSelect(e) {
  const region = this.data.quickRegions[index];
  const { province, city } = region;
  
  // è®¾ç½®åœ°åŒºé€‰æ‹©å™¨çš„å€¼
  const regionValue = [province, city];
  const displayRegion = `${province} - ${city}`;
  
  this.setData({
    regionValue,
    displayRegion,
    selectedProvince: province,
    selectedCity: city
  });
  
  this.loadWorkers(true);
}
```

#### é‡ç½®ç­›é€‰
```javascript
onResetFilter() {
  this.setData({
    regionValue: ['å…¨å›½', 'å…¨éƒ¨'],
    displayRegion: 'å…¨å›½',
    selectedProvince: '',
    selectedCity: '',
    searchKeyword: ''
  });
  
  this.loadWorkers(true);
}
```

## ğŸ¯ ä¼˜åŠ¿

### vs æ‰‹åŠ¨ç»´æŠ¤åœ°åŒºæ•°æ®
1. **æ•°æ®å®Œæ•´æ€§**: 
   - âœ… è¦†ç›–å…¨å›½æ‰€æœ‰çœå¸‚
   - âœ… å¾®ä¿¡å®˜æ–¹æ•°æ®ï¼Œå‡†ç¡®å¯é 
   - âŒ æ— éœ€æ‰‹åŠ¨ç»´æŠ¤åœ°åŒºæ•°æ®åº“

2. **è‡ªåŠ¨æ›´æ–°**: 
   - âœ… è¡Œæ”¿åŒºåˆ’å˜æ›´æ—¶å¾®ä¿¡è‡ªåŠ¨æ›´æ–°
   - âŒ ä¸éœ€è¦å…³æ³¨æœ€æ–°è¡Œæ”¿åŒºåˆ’è°ƒæ•´

3. **ä»£ç ç®€æ´**:
   - âœ… åˆ é™¤äº† `initRegionData()` å‡½æ•°
   - âœ… åˆ é™¤äº† `initMockRegionData()` å‡½æ•°
   - âœ… åˆ é™¤äº† `onRegionColumnChange()` å‡½æ•°
   - âœ… ç®€åŒ–äº† `onRegionChange()` å‡½æ•°
   - ğŸ“‰ ä»£ç é‡å‡å°‘çº¦ 150 è¡Œ

4. **ç”¨æˆ·ä½“éªŒ**:
   - âœ… åŸç”Ÿç»„ä»¶ï¼Œæ€§èƒ½æ›´å¥½
   - âœ… ç•Œé¢é£æ ¼ç»Ÿä¸€
   - âœ… è‡ªå¸¦"å…¨éƒ¨"é€‰é¡¹æ”¯æŒ

## ğŸ“ API è¯´æ˜

### Picker ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| mode | String | å¿…å¡«ï¼Œè®¾ç½®ä¸º "region" |
| value | Array | é€‰ä¸­çš„çœå¸‚åŒºï¼Œæ ¼å¼ï¼š`[çœ, å¸‚, åŒº]` |
| level | String | é€‰æ‹©å™¨å±‚çº§ï¼Œå¯é€‰ "province"/"city"/"region" |
| custom-item | String | è‡ªå®šä¹‰ç¬¬ä¸€é¡¹çš„æ–‡æœ¬ï¼Œå¦‚"å…¨éƒ¨" |
| bindchange | EventHandler | é€‰æ‹©å®Œæˆæ—¶è§¦å‘ |

### äº‹ä»¶è¿”å›å€¼

```javascript
// e.detail.value æ ¼å¼
{
  value: ['å¹¿ä¸œçœ', 'æ·±åœ³å¸‚'],  // æˆ– ['å¹¿ä¸œçœ', 'æ·±åœ³å¸‚', 'å—å±±åŒº']
  code: ['440000', '440300']    // è¡Œæ”¿åŒºåˆ’ä»£ç 
}
```

## ğŸ§ª æµ‹è¯•è¦ç‚¹

1. âœ… é€‰æ‹©ä»»æ„çœä»½ï¼ŒæŸ¥çœ‹æ˜¯å¦æ­£ç¡®ç­›é€‰
2. âœ… é€‰æ‹©ä»»æ„åŸå¸‚ï¼ŒæŸ¥çœ‹æ˜¯å¦æ­£ç¡®ç­›é€‰
3. âœ… ç‚¹å‡»å¿«æ·æ ‡ç­¾ï¼Œç¡®è®¤ä¸é€‰æ‹©å™¨è”åŠ¨
4. âœ… ç‚¹å‡»"é‡ç½®ç­›é€‰"ï¼Œç¡®è®¤æ¢å¤åˆå§‹çŠ¶æ€
5. âœ… ç»“åˆæœç´¢åŠŸèƒ½ï¼Œæµ‹è¯•ç»„åˆç­›é€‰

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [å¾®ä¿¡å°ç¨‹åº Picker ç»„ä»¶æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/component/picker.html)
- [Region æ¨¡å¼è¯´æ˜](https://developers.weixin.qq.com/miniprogram/dev/component/picker.html#region)

