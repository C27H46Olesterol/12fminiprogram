<!-- pages/manager/complete-task/complete-task.wxml -->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">完成任务</text>
    <text class="subtitle">工单编号：{{issue.issueId}}</text>
  </view>

  <!-- 工单基本信息 -->
  <view class="issue-info">
    <view class="info-item">
      <text class="label">问题标题</text>
      <text class="value">{{issue.title}}</text>
    </view>
    <view class="info-item">
      <text class="label">问题描述</text>
      <text class="value">{{issue.description}}</text>
    </view>
    <view class="info-item">
      <text class="label">客户姓名</text>
      <text class="value">{{issue.clientName}}</text>
    </view>
    <view class="info-item">
      <text class="label">客户联系电话</text>
      <text class="value">{{issue.clientPhone}}</text>
    </view>
    <view class="info-item">
      <text class="label">维修工电话</text>
      <text class="value">{{issue.workerPhone || '暂无'}}</text>
    </view>
    <view class="info-item">
      <text class="label">维修工地区</text>
      <text class="value">{{issue.workerRegion || '暂无'}}</text>
    </view>
  </view>

  <!-- 项目类型 -->
  <view class="form-section">
    <view class="section-title">项目类型 <text class="required">*</text></view>
    <view class="fault-type-selector" bindtap="showFaultTypeModal">
      <text class="{{faultType ? 'selected-text' : 'placeholder-text'}}">
        {{faultType || '请选择项目类型'}}
      </text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="btn-cancel" bindtap="onCancel">取消</button>
    <button class="btn-confirm" bindtap="onConfirm">确认完成</button>
  </view>

  <!-- 故障类型选择弹窗 -->
  <view class="fault-modal {{showFaultModal ? 'show' : ''}}" catchtap="hideFaultTypeModal">
    <view class="fault-modal-content" catchtap="stopPropagation">
      <view class="fault-modal-header">
        <text class="fault-modal-title">选择故障类型</text>
        <text class="fault-modal-close" catchtap="hideFaultTypeModal">✕</text>
      </view>
      <view class="fault-types-grid">
        <view class="fault-type-item" 
          wx:for="{{faultTypes}}" 
          wx:key="index"
          catchtap="selectFaultType" 
          data-type="{{item}}">
          <text class="fault-type-text">{{item}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

