<!-- pages/index.wxml -->
<view class="container">
  
  <!-- 1. 维修工视图 -->
  <block wx:if="{{userRole === '维修工'}}">
    <view class="worker-header">
      <view class="header-content">
        <text class="greeting">您好，{{userInfo.userName || "售后工程师"}}</text>
        <text class="subtitle">准备好开始今天的工作了吗？</text>
      </view>
      <image class="header-bg-icon" src="/images/icons/worker.png" mode="aspectFit"></image>
    </view>

    <view class="workbench-grid">
      <view class="work-card" bindtap="handleInstall">
        <view class="icon-circle blue">
          <image class="work-icon" src="/images/icons/add.png"></image>
        </view>
        <text class="work-title">安装设备</text>
        <text class="work-desc">新设备激活与绑定</text>
      </view>

      <view class="work-card" bindtap="handleRepair">
        <view class="icon-circle orange">
          <image class="work-icon" src="/images/icons/auto.png"></image>
        </view>
        <text class="work-title">维修设备</text>
        <text class="work-desc">故障诊断与处理</text>
      </view>

      <view class="work-card" bindtap="handleManual">
        <view class="icon-circle green">
          <image class="work-icon" src="/images/icons/menu.png"></image>
        </view>
        <text class="work-title">维修手册</text>
        <text class="work-desc">查阅技术文档</text>
      </view>
    </view>
  </block>

  <!-- 2. 普通用户视图 (功能入口) -->
  <block wx:else>
    <view class="worker-header user-mode">
      <view class="header-content">
        <text class="greeting">您好，{{userInfo.userName || "尊敬的用户"}}</text>
        <text class="subtitle">颐尔福为您提供全方位的售后保障</text>
      </view>
      <image class="header-bg-icon" src="/images/icons/user.png" mode="aspectFit"></image>
    </view>

    <view class="workbench-grid">
      <!-- 报修申请 -->
      <view class="work-card" bindtap="handleReport">
        <view class="icon-circle teal">
          <image class="work-icon" src="/images/icons/repair-form.png"></image>
        </view>
        <text class="work-title">报修申请</text>
        <text class="work-desc">设备故障在线报修</text>
      </view>

      <!-- 自助手册 -->
      <view class="work-card" bindtap="handleManual">
        <view class="icon-circle green">
          <image class="work-icon" src="/images/icons/menu.png"></image>
        </view>
        <text class="work-title">自助手册</text>
        <text class="work-desc">常见问题与操作指引</text>
      </view>
    </view>
  </block>

</view>
