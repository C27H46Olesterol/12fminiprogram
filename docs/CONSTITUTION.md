# 项目开发宪章 (Project Development Constitution)

本宪章旨在确立项目的核心开发原则，确保代码质量、测试标准、用户体验一致性及性能要求。所有开发人员在参与项目时应遵循以下准则。

## 1. 代码质量 (Code Quality)

### 1.1 命名与风格规范
- **变量与函数**：使用小驼峰命名法 (`camelCase`)，如 `getUserInfo`。命名应具有描述性，避免使用单字母变量（循环索引除外）。
- **组件与文件**：组件文件夹及文件名使用烤串命名法 (`kebab-case`)，如 `user-profile/`。
- **常量**：使用全大写下划线分隔 (`UPPER_SNAKE_CASE`)，如 `MAX_RETRY_COUNT`。
- **注释**：复杂逻辑必须包含 JSDoc 格式注释。公共组件需说明 `Props`、`Events` 及使用示例。

### 1.2 模块化与复用
- **单一职责原则**：每个函数或组件只做一件事。如果组件超过 300 行，考虑拆分为子组件。
- **DRY (Don't Repeat Yourself)**：重复逻辑应提取为工具函数 (`utils/`) 或 Hooks。
- **样式隔离**：避免使用全局样式污染，尽量使用组件级样式隔离或特定的 CSS 命名空间。

### 1.3 错误处理
- 所有异步操作（如 API 请求）必须包含 `try-catch` 块或 `.catch()` 处理。
- 错误日志应清晰记录，包含上下文信息，便于排查。

## 2. 测试标准 (Testing Standards)

### 2.1 单元测试
- **核心逻辑**：`utils/` 目录下的工具函数覆盖率应达到 90% 以上。
- **关键业务**：涉及金额、权限判断的逻辑必须编写单元测试。

### 2.2 集成测试与冒烟测试
- 每次提交前，必须手动或自动运行核心流程测试（如：登录 -> 列表展示 -> 详情页 -> 提交表单）。
- 关键路径（Happy Path）必须保证畅通无阻。

### 2.3 发布前检查
- 必须在真机（包括 iOS 和 Android 主流机型）上进行验证，不仅限于开发者工具。
- 检查控制台无报错（Errors）及非预期的警告（Warnings）。

## 3. 用户体验一致性 (User Experience Consistency)

### 3.1 视觉规范
- **色彩系统**：严格遵循设计规范（如 README 中定义的主色 `#1976D2`，辅助色 `#FF9800` 等）。
- **排版**：统一字体大小、行高和字重。标题、正文、说明文案应有明显的层级区分。

### 3.2 交互反馈
- **加载状态**：数据加载超过 300ms 必须显示 Loading 动画或骨架屏。
- **操作反馈**：用户的每个操作（点击、提交）都应有明确的反馈（如按钮点击态、Toast 提示、页面跳转）。
- **空状态**：列表或内容为空时，必须展示美观的 Empty State 组件，并提供引导操作。

### 3.3 异常流程
- 网络异常或请求失败时，应展示友好的错误提示页面或 Toast，允许用户重试，严禁直接展示代码级错误信息。

## 4. 性能要求 (Performance Requirements)

### 4.1 加载速度
- **首屏渲染**：小程序首屏内容（FCP）应在 1.5秒 内完成渲染。
- **包体积**：主包体积控制在 1.5MB 以内，非必要资源放至分包或云存储。

### 4.2 运行时性能
- **setData 优化**：避免频繁调用 `setData`，避免一次性传输大量数据（超过 256KB）。长列表必须使用虚拟滚动或分页加载。
- **图片优化**：所有静态图片需压缩后使用，大图使用 WebP 格式。列表页使用缩略图，详情页加载原图。

### 4.3 内存管理
- 及时清理定时器、事件监听器，避免内存泄漏。
- 页面卸载时，确保销毁不再使用的对象和引用。

---
*本宪章由团队共同维护，如有修改建议，请提交 Pull Request 进行讨论。*

